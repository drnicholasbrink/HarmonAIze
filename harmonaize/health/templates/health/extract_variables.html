{% extends "base.html" %}
{% load static %}

{% block title %}{{ page_title }}{% endblock title %}


{% block content %}
  <div class="hero-section">
    <div class="container">
      <h1 class="hero-title">Health Data Extraction</h1>
      <p class="hero-subtitle">Processing your health variables with intelligent analysis</p>
      
      <!-- Progress Indicator -->
      <div class="progress-indicator">
        <div class="progress-step completed">
          <span>Map Codebook</span>
        </div>
        <div class="progress-arrow">→</div>
        <div class="progress-step active">
          <span>Extract Variables</span>
        </div>
        <div class="progress-arrow">→</div>
        <div class="progress-step inactive">
          <span>Select Variables</span>
        </div>
      </div>
      
      <div class="study-info">
        <div class="study-name">{{ study.name }}</div>
        <div class="study-detail">Health Data Harmonisation Workflow</div>
      </div>
    </div>
  </div>

  <div class="main-content">
    <div class="extraction-card">
      <div class="extraction-header">
        <h2 class="extraction-title">Variable Extraction Complete</h2>
        <p class="extraction-subtitle">
          Your health variables have been successfully extracted from the codebook using your column mappings.
        </p>
      </div>

      <div class="processing-status">
        <div class="processing-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20,6 9,17 4,12"></polyline>
          </svg>
        </div>
        <div class="processing-title">Extraction Successful</div>
        <div class="processing-description">
          Variables have been extracted and are ready for your review and selection.
        </div>
      </div>

      <!-- LLM Integration Placeholder -->
      <div class="llm-placeholder">
        <div class="llm-title">{% include 'components/svg_icon.html' with icon='robot' size='20' class='inline-icon' %} AI Enhancement (Coming Soon)</div>
        <div class="llm-description">
          Future LLM integration will enhance your health variables with intelligent metadata enrichment
        </div>
        
        <div class="llm-features">
          <div class="llm-feature">
            <div class="llm-feature-title">{% include 'components/svg_icon.html' with icon='hospital' size='16' class='inline-icon' %} Medical Context</div>
            <div>Enhance descriptions with health-specific knowledge</div>
          </div>
          <div class="llm-feature">
            <div class="llm-feature-title">Ontology Mapping</div>
            <div>Auto-suggest SNOMED-CT, LOINC, and ICD codes</div>
          </div>
          <div class="llm-feature">
            <div class="llm-feature-title">Type Detection</div>
            <div>Intelligent variable type classification</div>
          </div>
          <div class="llm-feature">
            <div class="llm-feature-title">Category Assignment</div>
            <div>Organise variables into health domains</div>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <a href="{% url 'health:map_codebook' study.id %}" class="btn btn-secondary">
          ← Back to Mapping
        </a>
        <a href="{% url 'health:select_variables' study.id %}" class="btn btn-primary">
          Continue to Selection →
        </a>
      </div>
    </div>
  </div>
{% endblock content %}
